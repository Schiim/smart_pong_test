<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Beispiel</title>
</head>
<body>
    <h1>WebSocket Steuerung</h1>

    <button onclick="controlLED()">LED steuern</button>
    <button onclick="turnOffLED()">LED ausschalten</button>

    <script>
        var socket;

        function initializeWebSocket() {
            socket = new WebSocket('wss://schiim.github.io/smart_pong_test'); // Ersetze dies durch deine tatsächliche WebSocket-URL

            socket.onopen = function(event) {
                console.log('WebSocket geöffnet');
            };

            socket.onmessage = function(event) {
                console.log('Nachricht vom Server: ', event.data);
            };

            socket.onerror = function(error) {
                console.error('WebSocket-Fehler: ', error);
            };

            socket.onclose = function(event) {
                console.log('WebSocket geschlossen');
                socket = null;
            };
        }

        function controlLED() {
            if (socket && socket.readyState === WebSocket.OPEN) {
                socket.send('toggleLED');
            } else {
                console.warn('WebSocket ist nicht offen. Initialisiere WebSocket.');
                initializeWebSocket();
                socket.onopen = function(event) {
                    socket.send('toggleLED');
                };
            }
        }

        function turnOffLED() {
            if (socket && socket.readyState === WebSocket.OPEN) {
                socket.send('turnOffLED');
            } else {
                console.warn('WebSocket ist nicht offen.');
            }
        }

        // WebSocket-Verbindung initialisieren, wenn die Seite geladen wird
        window.onload = initializeWebSocket;
    </script>
</body>
</html>
